
<html>
  <head>
     <meta charset="utf-8">
      <!-- Gör att webbplatsen fungerar för mobil -->
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <!-- css fil -->
        <link rel="stylesheet" href="api.css">
        
         <!--Sidans titel -->
      <title>Linda Lindgren</title> 
      
      </head>
      <body>
    
  <!--Här börjar grid-container -->      
  <div class="grid-container">  
      
<!-- ruta - -->       
<div class="one"> 
    <a href="index.html">Linda Lindgren</a>
</div>
 
<!-- ruta - -->       
<div class="two">  
    <div class="text1">
    <a href="index.html">Linda Lindgren</a></div>
</div>
      
      
      
      
      
<!-- ruta - -->       
<div class="three"> 
    <img src="mo.png" alt="logo">
    <p>Linda Lindgren</p>
    
    <!-- en kommentar-- >
</div>       
          
<!-- ruta - -->       
<div class="four">
     <!--Här börjar grid-container -->      
  <div class="grid-container2">  
  <div class="ruta1" id="root">  
      </div>
    
   <div class="ruta2" id = "jokeinfo"> 
       <h1>Jokes</h1>
       <!--javascript test-->
      </div>
      
<div class ="ruta3"></div>
<div class = "ruta4" id="slinfo">
    <h1>Tidtabell - Skarpövägen Orminge</h1><br><hr></div>
      </div>
</div>           
                        
</div> 
</div>   
          

<script language="javascript">

const url = "https://cors-anywhere.herokuapp.com/http://api.icndb.com/jokes/random/5";

const info = document.getElementById('jokeinfo');

fetch(url)
.then((resp) => resp.json())
.then(function (data)
{
    let jokes = data.value
    return jokes.map(function (jokeobj)
    {
        info.innerHTML += `<br>*${jokeobj.joke}<br>`;
    }
    
    )


})

</script>
          
<script>
    // en variabel "app" pekar på div "root"
    const app = document.getElementById('root');
    // skapar en div
    const container = document.createElement('div');
    // skapar en div i en div
    app.appendChild(container);
    
    
    // request till ett api, skapas
    var request = new XMLHttpRequest();
    // använda requestet, //true - asyncromt
    request.open('GET','https://cors-anywhere.herokuapp.com/https://ghibliapi.herokuapp.com/films/',true);
    // skicka request
    request.send();
    
    //när requestet returnerar något
    request.onload = function()
    {
        // Vi skapar ett json objekt av datan
        var data = JSON.parse(this.response);
        // kollar att det fungerar, status mellan 200-400 är ok
        if(request.status >= 200 && request.status < 400)
            {
                // movie objektet skapas här.
                data.forEach(movie => 
                {
                    // varje film hamnar i ett "card", i en div
                    const card = document.createElement('div');
                    
                    // filmens titel ska visas i en rubik, en rubrik skapas h1
                    const h1 = document.createElement('h1');
                    // vad ska stå i h1, filmtiteln.
                    // Om man istället skriver movie.people får du folket i filmen.
                    h1.textContent = movie.title;
                    
                    // skapa en paragraf
                    const p = document.createElement('p');
                    // gör description kortare, tar max 300 tecken
                    movie.description = movie.description.substring(0, 300);
                    p.textContent = `${movie.description}...`;
                    
                    // vi vill lägga alla cards i vår container
                    container.appendChild(card);
                    // vi vill lägga i saker i "card"
                    card.appendChild(h1);
                    card.appendChild(p);
                    
                })
            }        
    }
    

</script>
<script> 
    
    //cors gör att man går genom en annan host för att komma vidare, för att när man har det på local host så är det inte tillåten för att den inte är tillräckligt säker.
    const url2 = "https://cors-anywhere.herokuapp.com/http://api.sl.se/api2/realtimedeparturesV4.json?key=0d6124e00bc54c46904b5574c9e81b44&siteid=4122&timewindow=60"; 
    var text2 = "";

    // jokes nedanför är namnet på diven.
    const info2 = document.getElementById('slinfo');
    
    // hämtar från url
    fetch(url2)
    // får ett respons som vi gör till json format
    .then((resp) => resp.json())
    // skapar en namnlös funktion och en variabel.
    .then(function (data)
    {
            // let är en datatyp, en variabeltyp
            let jokes2 = data.ResponseData.Buses
            return jokes2.map(function (jokeobj2)
            {
                info2.innerHTML += `<br>${jokeobj2.TransportMode}: ${jokeobj2.LineNumber} from ${jokeobj2.StopAreaName} to ${jokeobj2.Destination} <b><br> Departure in: ${jokeobj2.DisplayTime} </b><br><br><hr>`;

            })    
    })
   
</script>
    
    </body>
</html>